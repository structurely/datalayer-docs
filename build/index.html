
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;curl&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="curl">curl</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
          </li>
          <li>
            <a href="#overview" class="toc-h1 toc-link" data-title="Overview">Overview</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#overview-endpoints" class="toc-h2 toc-link" data-title="Endpoints">Endpoints</a>
                  </li>
                  <li>
                    <a href="#overview-types" class="toc-h2 toc-link" data-title="Types">Types</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#agents" class="toc-h1 toc-link" data-title="Agents">Agents</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#agents-schemas" class="toc-h2 toc-link" data-title="Schemas">Schemas</a>
                  </li>
                  <li>
                    <a href="#agents-list-agents" class="toc-h2 toc-link" data-title="List Agents">List Agents</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#leads" class="toc-h1 toc-link" data-title="Leads">Leads</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#leads-schemas" class="toc-h2 toc-link" data-title="Schemas">Schemas</a>
                  </li>
                  <li>
                    <a href="#leads-list-leads" class="toc-h2 toc-link" data-title="List Leads">List Leads</a>
                  </li>
                  <li>
                    <a href="#leads-get-lead" class="toc-h2 toc-link" data-title="Get Lead">Get Lead</a>
                  </li>
                  <li>
                    <a href="#leads-update-lead" class="toc-h2 toc-link" data-title="Update Lead">Update Lead</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#conversations" class="toc-h1 toc-link" data-title="Conversations">Conversations</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#conversations-schemas" class="toc-h2 toc-link" data-title="Schemas">Schemas</a>
                  </li>
                  <li>
                    <a href="#conversations-slots-contexts-and-stages" class="toc-h2 toc-link" data-title="Slots, Contexts, and Stages">Slots, Contexts, and Stages</a>
                  </li>
                  <li>
                    <a href="#conversations-create-conversation" class="toc-h2 toc-link" data-title="Create Conversation">Create Conversation</a>
                  </li>
                  <li>
                    <a href="#conversations-get-conversation" class="toc-h2 toc-link" data-title="Get Conversation">Get Conversation</a>
                  </li>
                  <li>
                    <a href="#conversations-update-conversation" class="toc-h2 toc-link" data-title="Update Conversation">Update Conversation</a>
                  </li>
                  <li>
                    <a href="#conversations-create-message" class="toc-h2 toc-link" data-title="Create Message">Create Message</a>
                  </li>
                  <li>
                    <a href="#conversations-create-response" class="toc-h2 toc-link" data-title="Create Response">Create Response</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://github.com/lord/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to the Structurely Holmes API! You can use our API to view, update, query both leads and agent&#39;s accounts. This API is a work in progress and is not in a final state. API endpoints, authentication flows, and availability may be subject to change at any time. If you are intestested in working with us via our API please contact us at info@structurely.com</p>
<h1 id='authentication'>Authentication</h1>
<p>All requests to the API in must include the header X-Api-Authorization with your API key. There will soon be a OAuth2 flow for obtaining bearer tokens to use in the Authorization header. To get an API key please contact us.</p>
<h1 id='overview'>Overview</h1><h2 id='overview-endpoints'>Endpoints</h2>
<p>All endpoints are hosted by the domain <code>api.structurely.com</code>. All requests must use <code>https</code>. Any request with the protocol <code>http</code> will be redirected to <code>https</code> with the status code 301. The path for the api will always start with <code>/v1</code>. Every resource endpoint will start with <code>https://api.structurely.com/v1</code>.</p>
<h2 id='overview-types'>Types</h2>
<table><thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>ObjectId</code></td>
<td>A 24 byte hexadecimal string. See <a href="https://docs.mongodb.com/manual/reference/method/ObjectId/">ObjectId</a>.</td>
</tr>
<tr>
<td><code>Boolean</code></td>
<td>A JSON boolean represented by either <code>true</code> or <code>false</code>.</td>
</tr>
<tr>
<td><code>Integer</code></td>
<td>A plain integer. May be restricted by an interval (i.e. <code>Intenger[0,)</code>, <code>Integer[0,10]</code>, <code>Integer(0,100]</code>).</td>
</tr>
<tr>
<td><code>Float</code></td>
<td>A floating point number.</td>
</tr>
<tr>
<td><code>String</code></td>
<td>A plain string. When used as a url or query parameter, it must be url escaped.</td>
</tr>
<tr>
<td><code>DateTime</code></td>
<td>A date time string that can be parsed into a time zone aware date time object.</td>
</tr>
<tr>
<td><code>List</code></td>
<td>An array of values of either a primitive type or a schema. Usually has a type name defined (i.e. <code>List&lt;Agent&gt;</code>, <code>List&lt;Integer&gt;</code>)</td>
</tr>
</tbody></table>
<h1 id='agents'>Agents</h1>
<p>The Agent resource represents an account in homechat. An agent has settings and owns leads.</p>

<aside class="warning">
This API resource is subject to change. Be prepared to make changes in the future.
</aside>
<h2 id='agents-schemas'>Schemas</h2><h3 id='agents-schemas-agent'>Agent</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
<th>Readable?</th>
<th>Writable?</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td><code>ObjectId</code></td>
<td>The ID of the agent this resource represents.</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>email</td>
<td><code>String</code></td>
<td>The email of the agent. This is unique and used for login credentials</td>
<td>Yes</td>
<td>No</td>
</tr>
</tbody></table>
<h2 id='agents-list-agents'>List Agents</h2><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.structurely.com/v1/agents?userId=1025&amp;email=john.richards191919%40example.com'</span> <span class="se">\</span>
  -H <span class="s1">'X-Api-Authorization: myapikey'</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"_metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"collection"</span><span class="p">:</span><span class="w"> </span><span class="s2">"agents"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="s2">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"agents"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b92de82f434f50034330e46"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john.richards191919@example.com"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint returns a list of agents sorted and/or filtered by the given parameters. This request requires the user_id parameter which refers to a third party integration user id (e.g. liondesk).</p>
<h3 id='agents-list-agents-http-request'>HTTP Request</h3>
<p><code>GET https://api.structurely.com/v1/agents</code></p>
<h3 id='agents-list-agents-query-parameters'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required?</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>userId<a href="#list-agents-note-1"><sup>[1]</sup></a></td>
<td><code>String,Integer</code></td>
<td>The third party user id</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr>
<td>limit</td>
<td><code>Integer[1,100]</code></td>
<td>The number of results to return</td>
<td>No</td>
<td><code>10</code></td>
</tr>
<tr>
<td>offset</td>
<td><code>Integer[0,)</code></td>
<td>Indicates the number of results to skip</td>
<td>No</td>
<td><code>0</code></td>
</tr>
<tr>
<td>sort<a href="#list-agents-note-2"><sup>[2]</sup></a></td>
<td><code>String</code></td>
<td>A comma separated list of fields to sort by</td>
<td>No</td>
<td><code>email</code></td>
</tr>
<tr>
<td>email<a href="#list-agents-note-3"><sup>[3]</sup></a></td>
<td><code>String</code></td>
<td>A partial or full email to search</td>
<td>No</td>
<td>None</td>
</tr>
</tbody></table>

<ol style="font-size: 12px">
  <li id="list-agents-note-1">This field expects the request to be coming from a system that has already integrated with Homechat. This field is expected to be removed in the near future and is only here to assist in finding an agent in Homechat that has an account in a different system.</li>
  <li id="list-agents-note-2">The sort string allows multiple fields with left to right precedence with optional <code>-</code> or <code>+</code> for controlling ascending and descending order</li>
  <li id="list-agents-note-3">String search fields use a case insensitive partial filter that can match any part of the string</li>
</ol>

<aside class="notice">
Be sure to replace myapikey with your API key.
</aside>

<aside class="warning">
The <code>userId</code> parameter will be removed in the future. Because of the way the system is set up currently, this parameter must be used until changes can be made to the API. Users will be notified before these changes are made to the API.
</aside>
<h1 id='leads'>Leads</h1>
<p>The Lead resource represents a single contact possibly with a conversation in homechat. This conversation includes messages by agents, the lead, and Holmes.</p>
<h2 id='leads-schemas'>Schemas</h2><h3 id='leads-schemas-lead'>Lead</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
<th>Readable?</th>
<th>Writable?</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td><code>ObjectId</code></td>
<td>The ID of the lead this resource represents.</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>name</td>
<td><code>String</code></td>
<td>The full name of the lead</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>email</td>
<td><code>String</code></td>
<td>The email of the lead</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>phone</td>
<td><code>String</code></td>
<td>The phone number of the lead or the format <code>+15551234567</code></td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>firstContact</td>
<td><code>Float</code></td>
<td>The number of seconds after the unix epoch since first contact was made with this lead</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>lastContact</td>
<td><code>Float</code></td>
<td>The number of seconds after the unix epoch since the latest contact was made with this lead</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>muted</td>
<td><code>Boolean</code></td>
<td>Indicates whether Holmes is muted in the conversation or not.</td>
<td>Yes</td>
<td>Yes</td>
</tr>
</tbody></table>
<h2 id='leads-list-leads'>List Leads</h2><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.structurely.com/v1/leads?ownerId=59275069dec26a0d20fcc41e&amp;name=john'</span> <span class="se">\</span>
  -H <span class="s1">'X-Api-Authorization: myapikey'</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"_metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"collection"</span><span class="p">:</span><span class="w"> </span><span class="s2">"leads"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="s2">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"leads"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b317f7f97f5a50048e1a516"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jdoe@example.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+15551234567"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"firstContact"</span><span class="p">:</span><span class="w"> </span><span class="mf">1529970559.365</span><span class="p">,</span><span class="w">
      </span><span class="s2">"lastContact"</span><span class="p">:</span><span class="w"> </span><span class="mf">1530572384.613</span><span class="p">,</span><span class="w">
      </span><span class="s2">"muted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5a8b7ce54aecff0034c31776"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john doe"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"the.real.jdoe@example.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+15551112222"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"firstContact"</span><span class="p">:</span><span class="w"> </span><span class="mf">1519090916.902</span><span class="p">,</span><span class="w">
      </span><span class="s2">"lastContact"</span><span class="p">:</span><span class="w"> </span><span class="mf">1519090973.948</span><span class="p">,</span><span class="w">
      </span><span class="s2">"muted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5a690b0ef4a8dc00359afb57"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Harkin"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jharkin@example.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+15557654321"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"firstContact"</span><span class="p">:</span><span class="w"> </span><span class="mf">1516833549.595</span><span class="p">,</span><span class="w">
      </span><span class="s2">"lastContact"</span><span class="p">:</span><span class="w"> </span><span class="mf">1516833576.27</span><span class="p">,</span><span class="w">
      </span><span class="s2">"muted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint returns a list of leads sorted and/or filtered by the given parameters. This request requires the ownerId parameter which refers to an agent id.</p>
<h3 id='leads-list-leads-http-request'>HTTP Request</h3>
<p><code>GET https://api.structurely.com/v1/leads</code></p>
<h3 id='leads-list-leads-query-parameters'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required?</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>ownerId</td>
<td><code>ObjectId</code></td>
<td>The id of the agent that owns this lead</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr>
<td>limit</td>
<td><code>Integer[1,100]</code></td>
<td>The number of results to return</td>
<td>No</td>
<td><code>10</code></td>
</tr>
<tr>
<td>offset</td>
<td><code>Integer[0,)</code></td>
<td>Indicates the number of results to skip</td>
<td>No</td>
<td><code>0</code></td>
</tr>
<tr>
<td>sort<a href="#list-leads-note-1"><sup>[1]</sup></a></td>
<td><code>String</code></td>
<td>A comma separated list of fields to sort by</td>
<td>No</td>
<td><code>-lastContact</code></td>
</tr>
<tr>
<td>name<a href="#list-leads-note-2"><sup>[2]</sup></a></td>
<td><code>String</code></td>
<td>A partial or full name to search</td>
<td>No</td>
<td>None</td>
</tr>
<tr>
<td>email<a href="#list-leads-note-2"><sup>[2]</sup></a></td>
<td><code>String</code></td>
<td>A partial or full email to search</td>
<td>No</td>
<td>None</td>
</tr>
<tr>
<td>phone<a href="#list-leads-note-2"><sup>[2]</sup></a></td>
<td><code>String</code></td>
<td>A partial or full phone number to search</td>
<td>No</td>
<td>None</td>
</tr>
</tbody></table>

<ol style="font-size: 12px">
  <li id="list-leads-note-1">The sort string allows multiple fields with left to right precedence with optional <code>-</code> or <code>+</code> for controlling ascending and descending order</li>
  <li id="list-leads-note-2">String search fields use a case insensitive partial filter that can match any part of the string</li>
</ol>

<aside class="notice">
Be sure to replace myapikey with your API key.
</aside>

<aside class="warning">
The <code>ownerId</code> parameter will be removed in the future. Because of the way the system is set up currently, this parameter must be used until changes can be made to the API. Users will be notified before these changes are made to the API.
</aside>
<h2 id='leads-get-lead'>Get Lead</h2><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.structurely.com/v1/leads/5ab1973c62c5be0034c2102c'</span> <span class="se">\</span>
  -H <span class="s1">'X-Api-Authorization: myapikey'</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ab1973c62c5be0034c2102c"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jdoe@example.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+15551234567"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"firstContact"</span><span class="p">:</span><span class="w"> </span><span class="mf">1529970559.365</span><span class="p">,</span><span class="w">
  </span><span class="s2">"lastContact"</span><span class="p">:</span><span class="w"> </span><span class="mf">1530572384.613</span><span class="p">,</span><span class="w">
  </span><span class="s2">"muted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint returns a specific lead.</p>
<h3 id='leads-get-lead-http-request'>HTTP Request</h3>
<p><code>GET https://api.structurely.com/v1/leads/&lt;id&gt;</code></p>
<h3 id='leads-get-lead-url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>The ID of the lead to retrieve</td>
</tr>
</tbody></table>
<h2 id='leads-update-lead'>Update Lead</h2><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.structurely.com/v1/leads/5ab1973c62c5be0034c2102c'</span> <span class="se">\</span>
  -X PATCH <span class="se">\</span>
  -H <span class="s1">'X-Api-Authorization: myapikey'</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -d <span class="s1">'{ "muted": true }'</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ab1973c62c5be0034c2102c"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jdoe@example.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+15551234567"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"firstContact"</span><span class="p">:</span><span class="w"> </span><span class="mf">1529970559.365</span><span class="p">,</span><span class="w">
  </span><span class="s2">"lastContact"</span><span class="p">:</span><span class="w"> </span><span class="mf">1530572384.613</span><span class="p">,</span><span class="w">
  </span><span class="s2">"muted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint updates a specific lead and returns the modified lead object.</p>
<h3 id='leads-update-lead-http-request'>HTTP Request</h3>
<p><code>PATCH https://api.structurely.com/v1/leads/&lt;id&gt;</code></p>
<h3 id='leads-update-lead-url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>The ID of the lead to update</td>
</tr>
</tbody></table>
<h3 id='leads-update-lead-body-parameters'>Body Parameters<a href="#leads-schemas-lead"><sup>[^]</sup></a></h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td><code>String</code></td>
</tr>
<tr>
<td>email</td>
<td><code>String</code></td>
</tr>
<tr>
<td>muted</td>
<td><code>Boolean</code></td>
</tr>
</tbody></table>

<aside class="notice">
Be sure to include the header `Content-Type: application/json` with your request.
</aside>
<h1 id='conversations'>Conversations</h1>
<p>The Conversation resource represents a conversational exchange with Aisa. This is distict from a lead because it interfaces directly with aisa rather than showing up for an agent in homechat.</p>

<aside class="warning">
This API resource is subject to change. Be prepared to make changes in the future.
</aside>
<h2 id='conversations-schemas'>Schemas</h2><h3 id='conversations-schemas-conversation'>Conversation</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
<th>Readable?</th>
<th>Writable?</th>
<th>Required?</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td><code>ObjectId</code></td>
<td>The ID of the conversation this resource represents.</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td></td>
</tr>
<tr>
<td>settings</td>
<td><code>ConversationSettings</code></td>
<td>The settings for holmes per this conversation.</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>slots</td>
<td><code>List&lt;ConversationSlot&gt;</code></td>
<td>A list of extracted or pre-filled values relating to the conversation.</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>muted</td>
<td><code>Boolean</code></td>
<td>A boolean flag to tell Holmes whether or not this conversation is muted. A muted conversation can still receive messages but will generate no replies.</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td><code>false</code></td>
</tr>
<tr>
<td>stages</td>
<td><code>List&lt;String&gt;</code></td>
<td>A list of stages this conversation is currently in.</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td></td>
</tr>
<tr>
<td>messages</td>
<td><code>List&lt;ConversationItem&gt;</code></td>
<td>A list of lead messages and system responses with the context value with each response.</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td></td>
</tr>
</tbody></table>
<h3 id='conversations-schemas-conversationsettings'>ConversationSettings</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
<th>Readable?</th>
<th>Writable?</th>
<th>Required?</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>timeZone</td>
<td><code>String</code></td>
<td>The time zone the realtor and/or lead. (See <a href="https://gist.github.com/heyalexej/8bf688fd67d7199be4a1682b3eec7568">list</a>)</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>holmesName</td>
<td><code>String</code></td>
<td>The name of conversation AI to use in responses.</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>Aisa</td>
</tr>
<tr>
<td>leadTypes</td>
<td><code>List&lt;String&gt;</code></td>
<td>The lead types that will be supported in this conversation. Possible values are <code>buyer</code>, <code>seller</code>, and <code>renter</code></td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td><code>[&#39;buyer&#39;, &#39;seller&#39;]</code></td>
</tr>
</tbody></table>
<h3 id='conversations-schemas-conversationslot'>ConversationSlot</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
<th>Readable?</th>
<th>Writable?</th>
<th>Required?</th>
</tr>
</thead><tbody>
<tr>
<td>name<a href="#conversations-slots-and-contexts-slots"><sup>[a]</sup></a></td>
<td><code>String</code></td>
<td>The name of the slot.</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td>value<a href="#conversations-slots-and-contexts-slots"><sup>[a]</sup></a></td>
<td><code>Any</code></td>
<td>The value of the slot.</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
</tr>
</tbody></table>
<h3 id='conversations-schemas-conversationitem'>ConversationItem</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
<th>Readable?</th>
<th>Writable?</th>
<th>Required?</th>
</tr>
</thead><tbody>
<tr>
<td>message</td>
<td><code>Message</code></td>
<td>A message the lead sent.</td>
<td>No</td>
<td>Yes</td>
<td>Yes<a href="#schema-conversationitem-note-1"><sup>[1]</sup></a></td>
</tr>
<tr>
<td>respone</td>
<td><code>Message</code></td>
<td>A respone sent by the system.</td>
<td>No</td>
<td>Yes</td>
<td>Yes<a href="#schema-conversationitem-note-1"><sup>[1]</sup></a></td>
</tr>
<tr>
<td>context<a href="#conversations-slots-and-contexts-contexts"><sup>[b]</sup></a></td>
<td><code>String</code></td>
<td>The context set by the response in this conversation item.</td>
<td>No</td>
<td>Yes</td>
<td>Yes<a href="#schema-conversationitem-note-2"><sup>[2]</sup></a></td>
</tr>
</tbody></table>

<ol style="font-size: 12px">
  <li id="schema-conversationitem-note-1"><code>message</code> and <code>response</code> are mutually exclusive. At least one is required to be present but not both.</li>
  <li id="schema-conversationitem-note-2"><code>context</code> is only required if the <code>response</code> field is used.</li>
</ol>
<h3 id='conversations-schemas-message'>Message</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
<th>Readable?</th>
<th>Writable?</th>
<th>Required?</th>
</tr>
</thead><tbody>
<tr>
<td>text</td>
<td><code>String</code></td>
<td>The text of the message.</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>received</td>
<td><code>DateTime</code></td>
<td>The time the message was sent or received.</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>_metadata<a href="#schema-message-note-1"><sup>[1]</sup></a></td>
<td><code>MessageMetaData</code></td>
<td>An optional metadata object to set the outgoing context for a response.</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
</tr>
</tbody></table>

<ol style="font-size: 12px">
  <li id="schema-message-note-1"><code>_metadata</code> is only used when creating a response object.</li>
</ol>
<h3 id='conversations-schemas-messagemetadata'>MessageMetaData</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
<th>Readable?</th>
<th>Writable?</th>
<th>Required?</th>
</tr>
</thead><tbody>
<tr>
<td>context</td>
<td><code>String</code></td>
<td>The outgoing context of this response. Used by Holmes to classify messages sent after this response.</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
</tr>
</tbody></table>
<h2 id='conversations-slots-contexts-and-stages'>Slots, Contexts, and Stages</h2><h3 id='conversations-slots-contexts-and-stages-slots'>Slots</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>String</td>
<td>The name of the lead.</td>
</tr>
<tr>
<td>email</td>
<td>String</td>
<td>The email of the lead.</td>
</tr>
<tr>
<td>phone</td>
<td>String</td>
<td>The phone number of the lead.</td>
</tr>
<tr>
<td>address</td>
<td>String</td>
<td>The address of the property a buyer lead is interested in.</td>
</tr>
<tr>
<td>selling_address</td>
<td>String</td>
<td>The address of the property a seller lead is trying to sell.</td>
</tr>
<tr>
<td>lead_types</td>
<td>List<String></td>
<td>A list of lead types this lead is considered as. Can be any combination of <code>buyer</code>, <code>seller</code>, or <code>renter</code>.</td>
</tr>
<tr>
<td>lead_source</td>
<td>String</td>
<td>The source of the lead. Can be any string.</td>
</tr>
<tr>
<td>agent_name</td>
<td>String</td>
<td>The name of the agent Holmes is messaging on the behalf of.</td>
</tr>
<tr>
<td>agent_phone</td>
<td>String</td>
<td>The phone of the agent.</td>
</tr>
<tr>
<td>agent_email</td>
<td>String</td>
<td>The email of the agent.</td>
</tr>
<tr>
<td>agency_name</td>
<td>String</td>
<td>The name of the agency the agent works for or Holmes is messaging on the behalf of.</td>
</tr>
<tr>
<td>office_location</td>
<td>String</td>
<td>The general location of the realtor office the system is representing.</td>
</tr>
</tbody></table>
<h3 id='conversations-slots-contexts-and-stages-contexts'>Contexts</h3>
<table><thead>
<tr>
<th>Name</th>
</tr>
</thead><tbody>
<tr>
<td>general</td>
</tr>
<tr>
<td>expect_address</td>
</tr>
<tr>
<td>expect_agent_status</td>
</tr>
<tr>
<td>expect_appointment</td>
</tr>
<tr>
<td>expect_baths</td>
</tr>
<tr>
<td>expect_beds</td>
</tr>
<tr>
<td>expect_call_availability</td>
</tr>
<tr>
<td>expect_contingency</td>
</tr>
<tr>
<td>expect_email</td>
</tr>
<tr>
<td>expect_financing_status</td>
</tr>
<tr>
<td>expect_lead_type</td>
</tr>
<tr>
<td>expect_listing_appointment</td>
</tr>
<tr>
<td>expect_location</td>
</tr>
<tr>
<td>expect_name</td>
</tr>
<tr>
<td>expect_phone</td>
</tr>
<tr>
<td>expect_price</td>
</tr>
<tr>
<td>expect_selling_address</td>
</tr>
<tr>
<td>expect_showing_appointment</td>
</tr>
<tr>
<td>expect_timeframe</td>
</tr>
</tbody></table>
<h3 id='conversations-slots-contexts-and-stages-stages'>Stages</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>not_responded</td>
<td>The lead has not responded in this conversation.</td>
</tr>
<tr>
<td>responded</td>
<td>The lead has responded in this conversation.</td>
</tr>
<tr>
<td>not_interested</td>
<td>The lead has indicated no interest or opted out of communication in this conversation.</td>
</tr>
<tr>
<td>interested</td>
<td>The lead has responded and has not been classified as not interested.</td>
</tr>
<tr>
<td>needs_follow_up</td>
<td>The lead has reached a conclusion in the conversation that requires further follow-up.</td>
</tr>
</tbody></table>
<h2 id='conversations-create-conversation'>Create Conversation</h2><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.structurely.com/v1/conversations'</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s1">'X-Api-Authorization: myapikey'</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -d <span class="s1">'{ "settings": { "time_zone": "America/Chicago" }, "slots": [{ "name": "email", "value": "jdoe@example.com" }], "messages": [{ "response": { "text": "Hello, what is your name?", "received": "2018-12-08T15:20:00.000Z" }, "context": "expect_name }, { "message": { "text": "John", "received": "2018-12-08T16:34:00.000Z" } }] }'</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5c09a4416241ea2c293275b8"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"holmesName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Aisa"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Chicago"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"slots"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jdoe@example.com"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"muted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint creates and returns a new conversation object.</p>
<h3 id='conversations-create-conversation-http-request'>HTTP Request</h3>
<p><code>POST https://api.structurely.com/v1/conversations</code></p>
<h3 id='conversations-create-conversation-body-parameters'>Body Parameters<a href="#conversations-schemas-conversation"><sup>[^]</sup></a></h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>settings</td>
<td><code>ConversationSettings</code></td>
</tr>
<tr>
<td>slots</td>
<td><code>List&lt;ConversationSlot&gt;</code></td>
</tr>
<tr>
<td>muted</td>
<td><code>Boolean</code></td>
</tr>
<tr>
<td>messages</td>
<td><code>List&lt;ConversationItem&gt;</code></td>
</tr>
</tbody></table>

<aside class="notice">
Be sure to include the header `Content-Type: application/json` with your request.
</aside>
<h2 id='conversations-get-conversation'>Get Conversation</h2><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.structurely.com/v1/conversations/5c09a4416241ea2c293275b8'</span> <span class="se">\</span>
  -H <span class="s1">'X-Api-Authorization: myapikey'</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5c09a4416241ea2c293275b8"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"holmesName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Aisa"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Chicago"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"slots"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jdoe@example.com"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"phone"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+15551234567"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"address"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123 Main St."</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"agent_name"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Andi Agent"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lead_types"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"buyer"</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"muted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint returns a specific conversation.</p>
<h3 id='conversations-get-conversation-http-request'>HTTP Request</h3>
<p><code>GET https://api.structurely.com/v1/conversations/&lt;id&gt;</code></p>
<h3 id='conversations-get-conversation-url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>The ID of the conversation to retrieve</td>
</tr>
</tbody></table>
<h2 id='conversations-update-conversation'>Update Conversation</h2><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.structurely.com/v1/conversations/5c09a4416241ea2c293275b8'</span> <span class="se">\</span>
  -X PATCH <span class="se">\</span>
  -H <span class="s1">'X-Api-Authorization: myapikey'</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -d <span class="s1">'{ "muted": true }'</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5c09a4416241ea2c293275b8"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"holmesName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Aisa"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Chicago"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"slots"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jdoe@example.com"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"muted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint updates and returns a specific conversation object.</p>
<h3 id='conversations-update-conversation-http-request'>HTTP Request</h3>
<p><code>PATCH https://api.structurely.com/v1/conversations/&lt;id&gt;</code></p>
<h3 id='conversations-update-conversation-url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>The ID of the conversation to update</td>
</tr>
</tbody></table>
<h3 id='conversations-update-conversation-body-parameters'>Body Parameters<a href="#conversations-schemas-conversation"><sup>[^]</sup></a></h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>muted</td>
<td><code>Boolean</code></td>
</tr>
</tbody></table>

<aside class="notice">
Be sure to include the header `Content-Type: application/json` with your request.
</aside>
<h2 id='conversations-create-message'>Create Message</h2><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.structurely.com/v1/conversations/5c09a4416241ea2c293275b8/messages'</span>
  -X POST <span class="se">\</span>
  -H <span class="s1">'X-Api-Authorization: myapikey'</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -d <span class="s1">'{ "text": "Hello World", "received": "2018-12-09T11:44:00.000Z" }'</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"_metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"conversation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5c09a4416241ea2c293275b8"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"messages"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="s2">"responses"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5c09a45e6241ea2c293275bf"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hello World"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"received"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-12-09T11:44:00.000Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint creates a new lead message for the conversation for us to extract and classify.</p>
<h3 id='conversations-create-message-http-request'>HTTP Request</h3>
<p><code>POST https://api.structurely.com/v1/conversations/&lt;id&gt;/messages</code></p>
<h3 id='conversations-create-message-url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>The ID of the conversation to retrieve</td>
</tr>
</tbody></table>
<h3 id='conversations-create-message-body-parameters'>Body Parameters<a href="#conversations-schemas-message"><sup>[^]</sup></a></h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>text</td>
<td><code>String</code></td>
</tr>
<tr>
<td>received</td>
<td><code>DateTime</code></td>
</tr>
</tbody></table>

<aside class="notice">
Be sure to include the header `Content-Type: application/json` with your request.
</aside>
<h2 id='conversations-create-response'>Create Response</h2><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.structurely.com/v1/conversations/5c09a4416241ea2c293275b8/responses'</span>
  -X POST <span class="se">\</span>
  -H <span class="s1">'X-Api-Authorization: myapikey'</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -d <span class="s1">'{ "_metadata": { "context": "expect_showing_appointment" }, "text": "Hello There", "received": "2018-12-09T11:44:00.000Z" }'</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"_metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"conversation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5c09a4416241ea2c293275b8"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"expect_showing_appointment"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"messages"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="s2">"responses"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5c09a4416241ea2c293275b5"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hello There"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"received"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-12-09T11:44:00.000Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint creates a new system response for the conversation. This does nothing in our system other than act as a send receipt notifying us that an outbound message was sent on behalf of the system/realtor.</p>
<h3 id='conversations-create-response-http-request'>HTTP Request</h3>
<p><code>POST https://api.structurely.com/v1/conversations/&lt;id&gt;/responses</code></p>
<h3 id='conversations-create-response-url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>The ID of the conversation to retrieve</td>
</tr>
</tbody></table>
<h3 id='conversations-create-response-body-parameters'>Body Parameters<a href="#conversations-schemas-message"><sup>[^]</sup></a></h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>_metadata</td>
<td><code>MessageMetaData</code></td>
</tr>
<tr>
<td>text</td>
<td><code>String</code></td>
</tr>
<tr>
<td>received</td>
<td><code>DateTime</code></td>
</tr>
</tbody></table>

<aside class="notice">
Be sure to include the header `Content-Type: application/json` with your request.
</aside>
<h1 id='errors'>Errors</h1>
<p>The Holmes API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request was invalid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- No API key provided.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- Your API key is invalid.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The specified resource could not be found.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed -- You tried to access an endpoint with an invalid method.</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>502</td>
<td>Bad Gateway -- Our backend services are unavailable. Please try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
<tr>
<td>504</td>
<td>Gateway Timeout -- Our backend services are taking too long to respond. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="curl">curl</a>
          </div>
      </div>
    </div>

    <script>
      window.intercomSettings = {
        app_id: "nvyqhgbn"
      };
    </script>
    <script>(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',intercomSettings);}else{var d=document;var i=function(){i.c(arguments)};i.q=[];i.c=function(args){i.q.push(args)};w.Intercom=i;function l(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/nvyqhgbn';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);}if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})()</script>
  </body>
</html>
